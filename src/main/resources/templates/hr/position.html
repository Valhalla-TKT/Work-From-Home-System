
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" id="fullscreen-body">

<head th:replace="~{fragments/header :: header}">
<title>WorkHub</title>
</head>

<body id="page"
	class="logged-out not-pro not-player not-self not-team not-on-team no-hiring  nav-v2-theme-cream">


	<!-- header -->
	<div th:replace="~{fragments/navigation :: navigation}"></div>
	<!-- header -->

	<div id="g_id_onload"
		data-client_id="32073492121-s6ur8ti01mh34gq2bpbufb8ujdfrpn4v.apps.googleusercontent.com"
		data-login_uri="index.html" data-ux_mode="redirect"></div>

	<div th:replace="fragments/hr/position :: content"></div>
	<!-- main -->
	


	<div id="signup-overlay" class="overlay ">
		<div class="lightbox">
			<a href="#" class="close" aria-label="close"> <svg
					xmlns="http://www.w3.org/2000/svg" width="25" height="25"
					viewBox="0 0 25 25" fill="none" role="img"
					class="icon icon-24 lazyload">
<rect x="3" y="5" width="18" height="16" fill="white"></rect>
<path fill-rule="evenodd" clip-rule="evenodd"
						d="M12.5051 0.135254C14.9528 0.135152 17.3455 0.860879 19.3807 2.22066C21.416 3.58044 23.0022 5.51321 23.939 7.77453C24.8757 10.0359 25.1209 12.5242 24.6434 14.9248C24.166 17.3255 22.9873 19.5306 21.2566 21.2614C19.5259 22.9922 17.3207 24.1709 14.9201 24.6485C12.5195 25.126 10.0311 24.881 7.76979 23.9443C5.50843 23.0076 3.57561 21.4214 2.21576 19.3862C0.855913 17.3511 0.130107 14.9583 0.130127 12.5107C0.130141 9.22858 1.43392 6.08092 3.75467 3.76009C6.07542 1.43926 9.22304 0.135377 12.5051 0.135254V0.135254ZM7.13525 16.4156C6.9463 16.6101 6.84148 16.8711 6.84346 17.1423C6.84544 17.4135 6.95406 17.6729 7.14583 17.8647C7.3376 18.0564 7.59711 18.1649 7.86827 18.1668C8.13943 18.1687 8.40044 18.0638 8.59488 17.8748L12.4997 13.9699L16.4103 17.8805C16.6047 18.0698 16.8659 18.1749 17.1372 18.1731C17.4085 18.1712 17.6682 18.0626 17.8601 17.8707C18.0519 17.6788 18.1605 17.4191 18.1623 17.1478C18.164 16.8765 18.0589 16.6153 17.8695 16.421L13.9592 12.5106L17.8847 8.58516C18.072 8.39039 18.1754 8.12994 18.1727 7.85976C18.1701 7.58958 18.0616 7.33122 17.8705 7.14017C17.6795 6.94911 17.4211 6.8406 17.1509 6.83794C16.8808 6.83529 16.6203 6.93869 16.4255 7.12594L12.4997 11.051L8.57998 7.13125C8.38644 6.93769 8.12393 6.82894 7.8502 6.82892C7.57647 6.82891 7.31394 6.93763 7.12038 7.13118C6.92681 7.32472 6.81806 7.58724 6.81804 7.86097C6.81803 8.13469 6.92675 8.39722 7.1203 8.59078L11.0402 12.5106L7.13525 16.4156Z"
						fill="#979797"></path>
</svg>

			</a>
			<div class="display">
				<div class="processing">Loadingâ€¦</div>
			</div>
		</div>
	</div>
	<div class="shot-overlay js-shot-overlay lazyloading-hidden-container"
		tabindex="-1"
		data-include="css:https://cdn.dribbble.com/assets/components/media-overlay-modal-1b4926ca8f94639ddb7473aed19f12df06783052c29ee65f83376741014a2977.css">
		<div class="overlay-content js-overlay-content"></div>

		<a href="#" class="js-close-overlay close-overlay" aria-label="close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26"
				fill="none" role="img" class="icon fill-current">
<path
					d="M8.28596 6.51819C7.7978 6.03003 7.00634 6.03003 6.51819 6.51819C6.03003 7.00634 6.03003 7.7978 6.51819 8.28596L11.2322 13L6.51819 17.714C6.03003 18.2022 6.03003 18.9937 6.51819 19.4818C7.00634 19.97 7.7978 19.97 8.28596 19.4818L13 14.7678L17.714 19.4818C18.2022 19.97 18.9937 19.97 19.4818 19.4818C19.97 18.9937 19.97 18.2022 19.4818 17.714L14.7678 13L19.4818 8.28596C19.97 7.7978 19.97 7.00634 19.4818 6.51819C18.9937 6.03003 18.2022 6.03003 17.714 6.51819L13 11.2322L8.28596 6.51819Z"
					fill="currentColor"></path>
</svg>

		</a>
	</div>

	<div id="shot-modals-app"></div>
	<div id="good-modals-app"></div>


	<div id="work-availability-modal-app"></div>

	<script
		src="/assets/ajax-api/ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- jquery failover -->
	<script>
  if (typeof jQuery == 'undefined') {
    document.write(unescape('%3Cscript src="/assets/jquery-3.2.1.min-53e3da38f323e0f6a546d64ae37b6c7634d01f1393ea50816b16ef9c79a88862.js">%3C/script>'))
  }
</script>




	<script>
  // ensure namespace is available
  Dribbble = window.Dribbble || {};
  Dribbble.JsConfig = Dribbble.JsConfig || {};
  Dribbble.isHistorySupported = () => (window.history && 'pushState' in window.history);

  User = {
    loggedIn: function() {
      return !!document.querySelector('body.logged-in')
    },
    loggedOut: function() {
      return !this.loggedIn()
    },
  };
</script>

	<script
		src="/assets/categories-legacy-js-df367e0be108a4bcd5cf056b1dc087a41e9f132ef897cb72dca69f0961bf07f7.js"></script>
	<script>
  var config = Dribbble.JsConfig || {}
  // the assign is so this partial can be called in other partials, e.g. modals
  // without overriding parent instantiations of JsConfig
  Dribbble.JsConfig = Object.assign(config, {
      user: {"isLoggedIn":false,"reCaptchaSiteKey":"6LdmBTIUAAAAAM4NIokaWu8p3BBuYEw3CxuDdyg_","canPurchasePro":true,"isHiringTrialEligible":false},
      hiringProfile: {},
      features: {"braintreeHiring":false,"proDiscountToasty":false,"collaborators":false,"hiringBundleDiscount":true,"purchaseFreelance":true,"proTrial":false,"jobBoardTrial":true,"hideCohortSelection":true,"shotFeedUpdates":false,"caseStudiesLinkBlock":false,"hiringAndJobDiscount":true,"programmaticAds":false},
      isRobot: null,
      remoteIp: "103.233.207.98",
      isProduction: true,
      permissions: {"userPermissions":["canBuyBoostWithBraintree","canSeeThirdPartyPaymentMethods"]},
      screenshot_boost: {"buttonText":[{"label":"Buy Now","value":"buy-now"},{"label":"Download","value":"download"},{"label":"Learn More","value":"learn-more"},{"label":"Shop Now","value":"shop-now"},{"label":"Apply Now","value":"apply-now"},{"label":"Try Now","value":"try-now"},{"label":"Get Offer","value":"get-offer"},{"label":"Contact Us","value":"contact-us"}],"tiers":{"lowTier":{"daysToServe":7,"range":{"lowerLimit":0,"upperLimit":10000}},"midTier":{"daysToServe":14,"range":{"lowerLimit":10001,"upperLimit":100000}},"highTier":{"daysToServe":28,"range":{"lowerLimit":100001,"upperLimit":null}}},"pricePerImpression":"0.01","purchase":{"stripePublicKey":"pk_live_9EfFSEE6iTCgHghKqBqnixxR","savedCreditCardInformation":null},"discount":null,"minimumImpressions":2000,"targetPlacements":{"following":"Following Feed","popular":"Popular Feed","search":"Search Feed","goods":"Goods Feed","recent":"New \u0026 Noteworthy Feed","shot_modal":"Shot Modal","similar_work":"Similar Work","tags":"Tag Feed","popular_first":"Popular Feed First"},"priorities":["self_serve","sales","remnant","sales_priority"]},
  })
</script>


	<script src="/assets/packs/js/application.ae6c19f201cd97e78298.js"></script>



	<script
		src="/assets/shots-manifest-774f346db3e5e419264b407a465002836f193c259e06bfa2eeff0b6b981a532f.js"></script>
	<script>
    $(function() {

      Dribbble.Thumbnails.initialize({"page_limit":1,"enable_shot_overlay":true,"cursor":false,"deferredContent":null,"staticParams":null,"showBoostedAds":true,"showSimilarShots":true,"boostedAdPlacement":"Popular Feed","boostedAdParams":null,"numberOfAdsOnFirstPage":3,"numberOfAdsOnSubsequentPages":0,"boostedAdGroupPositions":[1,7,14],"perPage":52});


      if(Dribbble.Bucket){
        new Dribbble.Bucket({ target: "a[data-bucket-add]" });
      }


      $(document).on(
        'click',
        'a[data-fav-toggle=shot]',
        Screenshot.Like.Shot.toggle
      )
    });
  </script>

	<div id="site-notifications"></div>

	<div th:replace="~{fragments/chat :: chat}"></div>

	<script src="/assets/welcome/fullscreen.js"></script>


	
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>

  	$(document).ready(function() {
  		getAllPosition();
    $('#create-position').click(function(event) {
	      event.preventDefault();
	      createPosition();
	    });
	  });
  	$('#saveChangesBtn').click(function () {
        // Save changes
        var positionId = $(this).data('position-id');
        saveChanges();
    });
  function createPosition() {
      var name = $('#position-name').val();

    // Data to be sent as JSON
    var requestData = {
      name: name
    };

    // AJAX call
    $.ajax({
      url: `/api/position/create`,
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify(requestData),
      success: function(response) {
        $('#message').text(response);
        $('#add-data-overlay').hide();
        Swal.fire({
  		  title: "Success!",
  		  text: "You've Completely added a new position!",
  		  icon: "success"
  		});
        getAllPosition();
        $('#position-name').val('');
      },
      error: function(error) {
        // Handle errors
        console.error('Error:', error);
      }
    });
  }
  
  function getAllPosition() {
	  var rowCount =0;
      $.ajax({
      	url: `api/position/positionList`,
          type: 'POST',
          contentType: 'application/json',
          success: function (response) {
				console.log(response)
              $('#position-list').empty();

              response.forEach(function (position) {
            	  rowCount++;
                  $('#position-list').append(`
               		  <li class="job-list-item">
  	                      <a class="job-link" rel="nofollow"
  	                          href="#"></a>
  	                      <div class="job-details-container">
  	                          <div class="lazy-avatar company-avatar">
  	                              <img src="/assets/icons/DAT Logo.png" />
  	                          </div>
  	                          <div class="job-title-company-container">
  	                              <div class="job-role">
  	                                  <span class="job-board-job-company">#${rowCount}</span>
  	                              </div>
  	                              <h4 class="job-title job-board-job-title">
  	                              	${position.name}
  	                              </h4>
  	                              <div class="job-details job-details--mobile">
  	                                  <div class="color-deep-blue-sea-light-40">
  	                                  
  	                                  </div>
  	                              </div>
  	                          </div>
  	                      </div>
  	                      <div class="job-additional-details-container">
  	                          <div class="buttons-container">
  	                              <button class="form-btn outlined edit-data edit-button" data-position-id="${position.id}">Edit </button>
  	                              <button class="btn2 btn2--tertiary margin-l-12 delete-button" data-position-id="${position.id}" onclick="confirmDelete(${position.id}, '${position.name}')">Delete</button>
  	                          </div>
  	                          <div class="job-details">
  	                              <div class="hide-on-desktop data-detail">
  	                                  <a class="manage-data" href="#" data-target="data-modal-1">
  	                                      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  	                                          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
  	                                      </svg>
  	                                  </a>
  	                                  /* <div id="data-modal-1" class="data-modal">
  	                                      <button class="data-modal-button edit-data edit-button"  data-position-id="${position.id}">Edit</button>
  	                                      <button class="data-modal-button delete-button"  data-position-id="${position.id}">Delete</button>
  	                                  </div> */
  	                              </div>
  	                          </div>
  	                      </div>
  	                  </li>
                  `);
              });
              console.log("row count =", rowCount)
              document.getElementById('total-count').innerText = rowCount
          },
          error: function (error) {
              console.error('Error:', error);
          }
      });
  }
  
  function openEditModal(positionId) {
      $.ajax({
          url: `api/position/getPosition?positionId=${positionId}`,
          type: 'POST',
          contentType: 'application/json',
          success: function (response) {
              $('#edit-position-name').val(response.name);
              $('#positionId').val(positionId);
              $('#edit-data-overlay').show();
          },
          error: function (error) {
              console.error('Error fetching position data:', error);
          }
      });
  }

  function saveChanges() {
      var editedName = $("#edit-position-name").val();
      var positionId = $('#positionId').val();
      var requestData = {
          name: editedName
      };

      $.ajax({
          url: `api/position/editPosition?positionId=${positionId}`,
          type: 'POST',
          contentType: 'application/json',
          data: JSON.stringify(requestData),
          success: function (response) {
              console.log('position data updated successfully:', response);
              $('#edit-data-overlay').hide();
              getAllPosition();
          },
          error: function (error) {
              console.error('Error updating position data:', error);
          }
      });
  }
     
  function confirmDelete(positionId, positionName) {
      Swal.fire({
          title: `Are you sure you want to delete ${positionName}?`,
          text: "This action cannot be undone!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Yes, delete it!'
      }).then((result) => {
          if (result.isConfirmed) {
          	deletePosition(positionId)
          	Swal.fire(
                  'Deleted!',
                  `Position with ID ${positionId} has been deleted.`,
                  'success'
              );
          }
      });
  }    
  
  function deletePosition(positionId) {
	    $.ajax({
	        url: `/api/position/deleteById?id=${positionId}`,
	        type: 'POST',
	        success: function(response) {
	            console.log('Position deleted successfully:', response);
	            $(`#position-list li[data-positionId="${positionId}"]`).remove();
	            getAllPosition();
	        },
	        error: function(error) {
	            console.error('Error deleting position:', error);
	        }
	    });
	}
	$(document).on('click', '.delete-button', function() {
	    var positionId = $(this).data('positionId');
	  	var positionName = $(this).closest('.job-list-item').find('.job-board-job-title').text().trim();
    	confirmDelete(positionId, positionName);
	});
	$(document).on('click', '.edit-button', function() {
      var positionId = $(this).data('position-id');
      openEditModal(positionId);
  });


</script>


<script>
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the button that opens the modal
  var btn = document.getElementById("create-position");

  // When the user clicks on the button, open the modal
  btn.onclick = function() {
    modal.style.display = "block";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
  
  document.addEventListener('DOMContentLoaded', function () {
	    document.querySelector('.add-data').addEventListener('click', function () {
	        document.getElementById('add-data-overlay').style.display = 'block';
	        document.getElementById('add-data-modal').style.display = 'block';
	    });
	    document.querySelector('#add-data-overlay .close').addEventListener('click', function () {
	        document.getElementById('add-data-overlay').style.display = 'none';
	        document.getElementById('add-data-modal').style.display = 'none';
	    });

	    document.querySelector('.edit-data').addEventListener('click', function() {
	        document.getElementById('edit-data-overlay').style.display = 'block';
	        document.getElementById('edit-data-modal').style.display = 'block';
	    });
		
	    document.querySelector('#edit-data-overlay .close').addEventListener('click', function() {	    	
	        document.getElementById('edit-data-overlay').style.display = 'none';
	        document.getElementById('edit-data-modal').style.display = 'none';
	    });
	    
	    document.querySelectorAll('.manage-data').forEach(item => {
	        item.addEventListener('click', event => {
	            const targetId = event.currentTarget.getAttribute('data-target');
	            const modal = document.getElementById(targetId);
	            if (modal) {
	                modal.style.display = modal.style.display === 'none' ? 'block' : 'none';
	            }
	        });
	    });

	    
	});
</script>




</body>

</html>
