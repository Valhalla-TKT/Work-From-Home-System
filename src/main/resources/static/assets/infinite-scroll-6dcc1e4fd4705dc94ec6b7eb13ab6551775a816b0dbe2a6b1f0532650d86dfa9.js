Dribbble.InfiniteScroll={paginationContainerHTML:'<div class="loading-more"><span class="processing">Loading more\u2026</span></div>',genericLoadingIndicator:function(){return{retry:function(t){this.reset(),t.disabledNext=!1,t.fetchNextPage()},hide:$.noop,reset:$.noop,show:$.noop,showErrorEncountered:$.noop,showReachedEnd:$.noop,showThrottled:$.noop}},jqueryLoadingIndicator:function(t,e){var i=$(t),n=function(t){i.html('<span class="null-message">'+t+"</span>").show()};return $.extend({},new Dribbble.InfiniteScroll.genericLoadingIndicator,{$el:i,selector:t,originalContent:i.html(),show:function(){i.show()},hide:function(){i.hide()},reset:function(){i.html(this.originalContent)},showCustomEnd:function(t){i.html(t)},showReachedEnd:function(){n(e&&e.text||"You\u2019ve reached the end of the list"),e&&e.cb&&e.cb()},showErrorEncountered:function(){n("Something went wrong\u2026")},showThrottled:function(e){i.html('<div class="rate-limited"><a href="#" class="load-next-page">Load more\u2026</a> <span>You\u2019ve exceeded our rate limits, so you may need to wait a minute or so. <a href="https://help.dribbble.com/#rate-limits" target="_blank">(more info)</a><span></div>'),i.find("a.load-next-page").on("click",function(t){t.preventDefault(),this.retry(e)}.bind(this))}})},horizontalScrollingIndicator:function(t){return $.extend({},new Dribbble.InfiniteScroll.genericLoadingIndicator,{show:function(){t.append("<div class='processing' />")},hide:function(){t.find(".processing").remove()},showReachedEnd:function(){this.hide()},showErrorEncountered:function(){this.hide()},reset:function(){t.find(".rate-limited").remove(),this.hide()},showThrottled:function(e){this.hide(),t.append('<li class="rate-limited"><a href="#" class="load-next-page">Load more\u2026</a> <span>You\u2019ve exceeded our rate limits, so you may need to wait a minute or so. <a href="https://help.dribbble.com/#rate-limits" target="_blank">(more info)</a><span></li>'),t.find(".load-next-page").on("click",function(t){t.preventDefault(),this.retry(e)}.bind(this))}})}},Dribbble.InfiniteScroll.Generic=function(t){this.initialize(t)},Dribbble.InfiniteScroll.Generic.prototype={$el:null,scrollable:null,itemSelector:null,perPage:null,buffer:null,baseUrl:document.location.toString(),autoLoadPageLimit:null,autofill:!0,disabledNext:!1,initiallyDisabled:!1,loading:!1,reachedEnd:!1,throttleTime:25,lastPosition:0,loadingIndicator:null,unique:!1,loadMoreCallback:null,pageLoadCallback:null,staticParams:{},responseDataKey:null,reachedEndText:null,reachedEndFn:null,blockDuplicates:!1,initialize:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.$el=$(t.$el),this.scrollable=this.scrollable||this.$el,Dribbble.Globals.throttle().then(function(t){this.isScrolling=t(this.isScrolling.bind(this),this.throttleTime)}.bind(this)),this.loadingIndicator=this.loadingIndicator||new Dribbble.InfiniteScroll.jqueryLoadingIndicator(this.loadingIndicatorSelector,{text:this.reachedEndText,cb:this.reachedEndFn}),this.initAppendedResults(),this.setPage(t.page),this.bindEventListeners()},initAppendedResults:function(){this.blockDuplicates&&(this.appendedResults=new Set,$(this.itemSelector).each(function(t,e){this.appendedResults.add(e.getAttribute("data-id"))}.bind(this)))},reset:function(t,e){this.initAppendedResults();e=e||{};this.baseUrl=t||this.baseUrl,this.httpMethod=e.method||"GET",this.data=e.data,this.currentXhr&&this.currentXhr.abort(),this.reachedEnd=!1,this.disabledNext=!1,this.initiallyDisabled=!1,this.$el.empty(),this.loaded=0,this.resetPage(),this.setLoading(!1),this.fetchNextPage(function(){Dribbble.LargeShotViewRecorder&&Dribbble.LargeShotViewRecorder.start()})},resetFromStart:function(t){this.initAppendedResults(),this.baseUrl=t||this.baseUrl,this.reachedEnd=!1,this.disabledNext=!1,this.initiallyDisabled=!1,this.loaded=0,this.setPage(1),this.setLoading(!1),this.loadingIndicator.reset(),Dribbble.LargeShotViewRecorder&&Dribbble.LargeShotViewRecorder.start()},disable:function(){this.disabledNext=!0},bindEventListeners:function(){$(window).on("unload",this.onUnload.bind(this)).ready(this.onReady.bind(this))},onUnload:function(){$(window).scrollTop(0)},onReady:function(){if(this.unique&&$(this.scrollable).off("scroll.infinite"),$(this.scrollable).on("scroll.infinite",this.isScrolling.bind(this)),this.deferredContentLoader)return this.deferredContentLoader();var t=this.$el.find(this.itemSelector);if(this._noMoreItemsToLoad(t))return this.reachedEnd=!0,void this.setLoading(!1);this.initiallyDisabled||(this.disabledNext=!1),this.autofill&&this.fetchNextPageIfNeeded()},isScrolling:function(){var t=this.scrollPosition();if(this.$el.toggleClass("is-scrolled",0<t),this.internalOnScroll&&this.internalOnScroll(t),!this.reachedEnd){this.onScroll&&this.onScroll.apply(this,[t]);var e=t>this.lastPosition;this.lastPosition=t,this.loading||e&&this.fetchNextPageIfNeeded(t)}},fetchNextPageIfNeeded:function(t){this.initiallyDisabled||this.disabledNext||this.noLongerInDom()||this.containerNotVisible()||this.distanceToEnd(t)>this.buffer||this.fetchNextPage()},fetchNextPage:function(t){if(!this.loading)return this.setLoading(!0),this.fetchPage(this.page.last+1,t),!1},fetchPage:function(t,i){var e=this.urlForPage(t);this.onFetchPage&&this.onFetchPage(t,e);var n=function(t){var e=this.responseDataKey?t[this.responseDataKey]:t;202==this.currentXhr.status?(this.requestedShotCount=this._perPage(),this.delay=(this.delay||0)+150,setTimeout(function(){this.fetchPage()}.bind(this),this.delay)):(this.showNextPage(e),i&&i())}.bind(this),o={context:this,success:n,error:this.showError,method:this.httpMethod||"GET",data:{}};this.data&&(o.data=this.data),this.searchParams&&(o.data.search=JSON.stringify(this.searchParams)),this.currentXhr=$.ajax(e,o)},append:function(t){this.$el.append(t)},noLongerInDom:function(){var t=$(this.scrollable)[0];return t!=window&&!$.contains(document.documentElement,t)},containerNotVisible:function(){return!this.$el.is(":visible")},showNextPage:function(t){var e,i;if(this.page.last++,this.jsonItems?(e=this.jsonItems(t),this.append(t,this.page.last)):(e=$(t).filter(this.itemSelector),this.onBeforeAppend?e=this.onBeforeAppend(e):this.appendedResults&&(i=e.filter(function(t,e){var i=e.getAttribute("data-id");if(!this.appendedResults.has(i))return e}.bind(this))),this.append(i||e,this.page.last),$("body").append($(t).filter("script")),Dribbble.MediaSwap&&new Dribbble.MediaSwap("[data-video-teaser-small][data-video-teaser-large]")),this.loaded+=e.length,this.emitAppendEvent(),this.appendedResults&&e.each(function(t,e){this.appendedResults.add(e.getAttribute("data-id"))}.bind(this)),this.onAfterAppend&&this.onAfterAppend(e),this.setLoading(!1),this._noMoreItemsToLoad(e))this.disabledNext=!0,this.reachedEnd=!0,document.querySelector(this.itemSelector)&&this.loadingIndicator.showReachedEnd(),$(this.loadNextButtonSelector).hide();else if(this._reachedAutoPageLimit()){this.disabledNext=!0,$(this.loadNextButtonSelector).show(),this.nextButtonCanLoadMore&&!this.nextButtonCanLoadMore()&&(this.reachedEnd=!0),this.loadMoreCallback&&this.loadMoreCallback(this)}else this.pageLoadCallback?this.pageLoadCallback(this):this.autofill&&this.fetchNextPageIfNeeded()},emitAppendEvent:function(){var t=new Event("dribbble.infinitescroll.append",{bubbles:!0});document.dispatchEvent(t)},_fewerItemsThanRequested:function(t){return t.length<this.requestedShotCount},_reachedAutoPageLimit:function(){return this.autoLoadPageLimit&&this.page.last%this.autoLoadPageLimit==0},_noMoreItemsToLoad:function(t){var e=(this.$el&&this.$el[0]?this.$el[0]:document.querySelector(".js-thumbnail-grid")).children[0]!==t[0];return this.requestedShotCount&&e?t.length+1<this.requestedShotCount:this.requestedShotCount?t.length<this.requestedShotCount:t.length<this._perPage()},_perPage:function(){return"function"==typeof this.perPage?this.perPage():this.perPage},setLoading:function(t){(this.loading=t)&&$(this.loadNextButtonSelector).hide(),this.loadingIndicator[t?"show":"hide"]()},resetPage:function(){this.setPage(0)},setPage:function(t){t=void 0!==t?t:1;var e=this.baseUrl.match(/page=(\d+)/);e&&(t=parseInt(e[1],10)),this.page={first:t,last:t}},showError:function(t){if("abort"!=(t=t||{}).statusText){if(403==t.status||429==t.status)return this.loading=!1,void this.loadingIndicator.showThrottled(this);404==t.status?this.loadingIndicator.showReachedEnd():401==t.status?this.loadingIndicator.showCustomEnd(t.responseText):this.loadingIndicator.showErrorEncountered(t),this.disabledNext=!0,this.reachedEnd=!0,$(this.loadNextButtonSelector).hide()}},queryParamsForPage:function(t){var e={page:t,per_page:this._perPage()};return $.extend(e,this.extraParams(t),this.staticParams)},allowedParamsForPage:function(){var e={},t=window.location.search.substring(1).split("&"),i=["keyword","color","timeframe","source_file"];return $.each(t,function(){var t=this.split("=");-1!==i.indexOf(t[0])&&(e[t[0]]=t[1])}),e},extraParams:function(){return{}},urlForPage:function(t){var e=this.queryParamsForPage(t),i=this.baseUrl.split("#")[0];return $.extend(e,this.allowedParamsForPage()),-1<i.indexOf("?")?i+"&"+$.param(e):i+"?"+$.param(e)}},Dribbble.InfiniteScroll.Vertical=function(t){this.initialize(t)},Dribbble.InfiniteScroll.Vertical.prototype=$.extend({},Dribbble.InfiniteScroll.Generic.prototype,{buffer:window.innerHeight,scrollable:window,bindEventListeners:function(){Dribbble.InfiniteScroll.Generic.prototype.bindEventListeners.apply(this),this.$backToTop&&this.$backToTop.on("click",function(){$("html,body").animate({scrollTop:0,display:"none"},500)})},distanceToEnd:function(t){return this.$el.height()-$(this.scrollable).height()-(t||this.scrollPosition())},internalOnScroll:function(t){this.$backToTop&&!Dribbble.isMobile()&&(50<t?this.$backToTop.fadeIn(100):this.$backToTop.fadeOut(100));var e=document.querySelector(".js-site-footer");e&&(t>e.offsetTop-window.innerHeight?this.$backToTop.addClass("back-to-top-absolute"):this.$backToTop.removeClass("back-to-top-absolute"))},scrollPosition:function(){return $(this.scrollable).scrollTop()}}),Dribbble.InfiniteScroll.Horizontal=function(t){this.initialize(t)},Dribbble.InfiniteScroll.Horizontal.prototype=$.extend({},Dribbble.InfiniteScroll.Generic.prototype,{initialize:function(t){Dribbble.InfiniteScroll.Generic.prototype.initialize.apply(this,[t]),this.buffer=Math.min(.75*this.$el.width(),500),$(this.scrollable).on("click",".scroll-backward a",this.scrollBackward.bind(this)),$(this.scrollable).on("click",".scroll-forward a",this.scrollForward.bind(this))},distanceToEnd:function(t){var e=(t||this.scrollPosition())+$(this.scrollable).width();return this.$el[0].scrollWidth-e},scrollPosition:function(){return $(this.scrollable).scrollLeft()},scrollBackward:function(t){this.scrollInDirection(t,-1)},scrollForward:function(t){this.scrollInDirection(t,1)},scrollInDirection:function(t,e){t.preventDefault();var i=80;$(this.scrollable).animate({scrollLeft:this.scrollPosition()+($(this.scrollable).width()-i)*e},800)}}),Dribbble.InfiniteScroll.Vertical.Simple=function(t){this.initialize(t)},Dribbble.InfiniteScroll.Vertical.Simple.prototype=$.extend({},Dribbble.InfiniteScroll.Vertical.prototype,{initialize:function(t){$(t.paginationContainerSelector||"div.page").find(".pagination").hide(),$(Dribbble.InfiniteScroll.paginationContainerHTML).insertAfter(t.$el);var e=$.extend({},t,{loadingIndicatorSelector:".loading-more",$backToTop:t.$backToTop||$("div.back-to-top")});Dribbble.InfiniteScroll.Vertical.prototype.initialize.apply(this,[e])}});